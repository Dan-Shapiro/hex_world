<div class="panel">
  <div class="panel-head">
    <div class="panel-title">Run</div>
    <div class="panel-chip"><%= run.status.upcase %></div>
  </div>

  <div class="kv">
    <div class="kv-row"><div class="k">Turn</div><div class="v"><%= run.turn %></div></div>
    <div class="kv-row"><div class="k">Alignment</div><div class="v"><%= run.state["alignment"] %></div></div>
    <div class="kv-row"><div class="k">Threat</div><div class="v"><%= run.state.fetch("threat", 0) %> / 10</div></div>
  </div>

  <div class="divider"></div>

  <div class="resources">
    <div class="resources-title">Resources</div>
    <div class="resources-grid">
      <% run.resources.sort_by { |k, _| k }.each do |k, v| %>
        <div class="resource">
          <div class="rk"><%= k %></div>
          <div class="rv"><%= v %></div>
        </div>
      <% end %>
    </div>
  </div>

  <% if run.active? %>
    <div class="actionbar">
      <%= button_to "End Turn", end_turn_run_path(run), method: :post, class: "btn btn-primary btn-wide" %>
    </div>
  <% end %>

  <div class="legend">
    <div class="legend-item"><span class="swatch swatch-unlocked"></span>Unlocked</div>
    <div class="legend-item"><span class="swatch swatch-available"></span>Available</div>
    <div class="legend-item"><span class="swatch swatch-locked"></span>Locked</div>
    <div class="legend-item"><span class="swatch swatch-unknown"></span>Unknown</div>
    <div class="legend-item"><span class="swatch swatch-selected"></span>Selected</div>
  </div>
</div>
